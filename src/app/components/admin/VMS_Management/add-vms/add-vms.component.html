<div class="p-4">
    <div class="row">
        <div class="col-md-12 grid-margin col-xl-12 ">
            <button class="btn btn-primary btn-rounded mb-1" (click)="BackToList()">
                <!-- <span class="spinner-border spinner-border-sm me-1" ></span> -->
                <i class="icon-arrow-left"></i>
                Back To List
            </button>
        
    <div class="card">
       
                <form *ngIf="!loading" [formGroup]="form" (ngSubmit)="onSubmit()">
                    <div class="card-body">
                        <div class="row">
                            <div class="mb-3 col">
                                <label class="form-label">VMS ID*</label>
                                <input type="text" (focusout)="ValidateVMSID()" formControlName="vmsId" class="form-control" placeholder="VMS ID"
                                    [ngClass]="{ 'is-invalid': f['vmsId'].touched && f['vmsId'].errors, 'is-valid': f['vmsId'].valid }" />
                                <div *ngIf="f['vmsId'].touched && f['vmsId'].errors" class="invalid-feedback">
                                    <div>{{getErrorMessage('vmsId','VMS ID',true,"Invalid data available in VMS ID")}}
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3 col">
                                <label class="form-label">Serial No*</label>
                                <input type="text" formControlName="serialNo" class="form-control"
                                    placeholder="Description"
                                    [ngClass]="{ 'is-invalid': f['serialNo'].touched && f['serialNo'].errors, 'is-valid': f['serialNo'].valid }" />
                                <div *ngIf="f['serialNo'].touched && f['serialNo'].errors" class="invalid-feedback">
                                    <div>{{getErrorMessage('serialNo','Serial No',true,"Invalid data available in Serial No")}}
                                    </div>
                                </div>
                            </div>
                            <div class="mb-9 col">
                                <label class="form-label">Description*</label>
                                <input type="text" formControlName="description" class="form-control"
                                    placeholder="Description" (focusout)="descriptionCheck()"
                                    [ngClass]="{ 'is-invalid': f['description'].touched && f['description'].errors, 'is-valid': f['description'].valid }" />
                                <div *ngIf="f['description'].touched && f['description'].errors"
                                    class="invalid-feedback">
                                    <div>{{getErrorMessage('description','Description',true,"Invalid data available in Description")}}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="mb-3 col">
                                <label class="form-label">Select Zone*</label>
                                <select class="form-control form-control-sm" formControlName="zoneId" [ngClass]="{'is-invalid': submitting && f['zoneId'].errors}" [(ngModel)]="selectedZone">
                                    <option value="0">Select Zone</option>
                                    <option *ngFor="let zone of zones" value="{{zone.id}}">{{zone.zoneName}}</option>
                                </select>
                                <div *ngIf="f['zoneId'].touched && f['zoneId'].errors" class="invalid-feedback">
                                    <div>{{getErrorMessage('zoneId','Zone ID',true,"Invalid data available in Zone ID")}}
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3 col">
                                <label class="form-label">Installation Date*</label>
                                <input type="date" class="form-control form-control-sm" placeholder="Installation Date"
                                    id='installDate' formControlName="installDate" [(ngModel)]="installDate"
                                    [ngClass]="{ 'is-invalid': f['installDate'].touched && f['installDate'].errors, 'is-valid': f['installDate'].valid }" />
                                <div *ngIf="f['installDate'].touched && f['installDate'].errors"
                                    class="invalid-feedback">
                                    <div>{{getErrorMessage('installDate','Install Date',true,"Invalid data available in Install Date")}}
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3 col">
                                <label class="form-label">IP Address*</label>
                                <input type="text" class="form-control form-control-sm" placeholder="IP Address"
                                    id='ipAddress' (focusout)="ValidateIPAddress()" formControlName="ipAddress" [ngClass]="{ 'is-invalid': f['ipAddress'].touched && f['ipAddress'].errors, 'is-valid': f['ipAddress'].valid }" />
                                <div *ngIf="f['ipAddress'].touched && f['ipAddress'].errors" class="invalid-feedback">
                                    <div>{{getErrorMessage('ipAddress','IP Address',true,"Invalid data available in IP Address")}}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="mb-3 col">
                                <label class="form-label">Longitude*</label>
                                <input type="text" class="form-control form-control-sm" placeholder="Longitude" 
                                    id='longitude' formControlName="longitude" [ngClass]="{ 'is-invalid': f['longitude'].touched && f['longitude'].errors, 'is-valid': f['longitude'].valid }" />
                                <div *ngIf="f['longitude'].touched && f['ipAddress'].errors" class="invalid-feedback">
                                    <div>{{getErrorMessage('longitude','Longitude',true,"Invalid data available in Longitude")}}
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3 col">
                                <label class="form-label">Latitude*</label>
                                <input type="text" class="form-control form-control-sm" placeholder="Latitude"
                                    id='latitude' formControlName="latitude"
                                    [ngClass]="{ 'is-invalid': f['latitude'].touched && f['latitude'].errors, 'is-valid': f['latitude'].valid }" />
                                <div *ngIf="f['latitude'].touched && f['latitude'].errors" class="invalid-feedback">
                                    <div>{{getErrorMessage('latitude','Latitude',true,"Invalid data available in Latitude")}}
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3 col">
                                <label class="form-label">Location*</label>
                                <div class="text-primary">
                                    <a class="btn btn-outline-primary btn-icon-text" (click)="OpenZoneMap()"
                                        style="width: 200px;"><i class="fa fa-map-marker"></i> Check on Map </a>

                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="mb-3 col">
                                <label class="form-label">Height*</label>
                                <input type="text" class="form-control form-control-sm" placeholder="Height" id='height'
                                    formControlName="height"
                                    [ngClass]="{ 'is-invalid': f['height'].touched && f['height'].errors, 'is-valid': f['height'].valid }" />
                                <div *ngIf="f['height'].touched && f['height'].errors" class="invalid-feedback">
                                    <div>{{getErrorMessage('height','Height',true,"Invalid data available in Height")}}
                                    </div>
                                </div>
                            </div>

                            <div class="mb-3 col">
                                <label class="form-label">Width*</label>
                                <input type="text" class="form-control form-control-sm" placeholder="Width" id='width'
                                    formControlName="width"
                                    [ngClass]="{ 'is-invalid': f['width'].touched && f['width'].errors, 'is-valid': f['width'].valid }" />
                                <div *ngIf="f['width'].touched && f['width'].errors" class="invalid-feedback">
                                    <div>{{getErrorMessage('width','Width',true,"Invalid data available in Width")}}
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3 col">
                                <label class="form-label">Status</label> <br/>
                                <label class="switch active">
                                    <input type="checkbox" formControlName="isActive" [(ngModel)]="active">
                                    <div class="slider round"></div>
                                </label>
                            </div>
                        </div>
                        <div class="form-group col-md-12">
                            <hr>

                        </div>
                        <div class="row">
                            <div class="form-group col-md-2 border-right">
                                <h6 class="text-center">Configuration :- </h6>
                            </div>
                            <div class="form-group col-md-5">
                                <div class="range-slider">
                                    <div id="tooltip"></div>
                                    <input id="range" formControlName="brightnessCtrl" (input)="BrightnessChage()" [(ngModel)]="brightness" type="range" step="2" value="0"
                                        min="1" max="254">
                                </div>
                                <label class="text-center w-100"> Brightness : <span
                                        class="text-dark">{{brightness}}</span> </label>

                            </div>
                            <div class="form-group col-md-4 text-center">
                                
                                <label class="switch onOff">
                                    <input type="checkbox" formControlName="vmson" [(ngModel)]="vmsOn">
                                    <div class="slider round"></div>
                                </label>
                            </div>
                            <div class="col-md-3 col">
                                <label class="form-label">Select VMD Type*</label>
                                <select class="form-control form-control-sm" formControlName="vmdType" [ngClass]="{'is-invalid': submitting && f['vmdType'].errors}" [(ngModel)]="selectedVmdType">
                                    <option value="0">Select Type</option>
                                    <option *ngFor="let type of vmdTypes" value="{{type.prmvalue}}">{{type.prmkey}}</option>
                                </select>
                                <div *ngIf="f['vmdType'].touched && f['vmdType'].errors" class="invalid-feedback">
                                    <div>{{getErrorMessage('vmdType','VMD Type',true,"Invalid data available in VMD Type")}}
                                    </div>
                                </div>
                            </div>
                        </div>
            </div>
                       
                        <div class="card-footer bg-light p-2 text-right">

                           
                                <button [disabled]="!form.valid" type="button" class="btn btn-primary mr-2" (click)="onSubmit()">
                                    <span *ngIf="submitting" class="spinner-border spinner-border-sm me-1"></span>
                                    Submit
                                </button>
                          
                                <button [disabled]="!form.valid" class="btn btn-secondary">
                                    <span *ngIf="submitting" class="spinner-border spinner-border-sm me-1"></span>
                                    Reset
                                </button>
                            
                                <button type="button" class="btn btn-danger ml-2" (click)="DeleteVMS()"  *ngIf="id!=0">
                                    <span *ngIf="submitting" class="spinner-border spinner-border-sm me-1"></span>
                                    Delete
                                </button>
                            
                        </div>
                    
                </form>
        </div>
    </div>
</div>
</div>